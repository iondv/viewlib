Эта страница на [English](/README.md)

# IONDV. Viewlib

Viewlib - приложение IONDV. Framework. Позволяет применять дополнительный функционал для объектов системы, расширяющий возможности приложений, реализованных на IONDV.Framework.

### Кратко об IONDV. Framework

IONDV. Framework - это опенсорный фреймворк на node.js для разработки учетных приложений 
или микросервисов на основе метаданных и отдельных модулей. Он является частью 
инструментальной цифровой платформы для создания enterprise 
(ERP) приложений состоящей из опенсорсных компонентов: самого [фреймворка](https://github.com/iondv/framework), 
[модулей](https://github.com/topics/iondv-module) и готовых приложений расширяющих его 
функциональность, визуальной среды [Studio](https://github.com/iondv/studio) для 
разработки метаданных приложений.

Подробнее об [IONDV. Framework на сайте](https://iondv.com), документация доступна в [репозитории на github](https://github.com/iondv/framework/blob/master/docs/en/index.md)

## Описание и назначение

**IONDV. Viewlib** - является дополнительным приложением, которое содержит библиотеку с шаблонами, позволяющими отобразить на форме атрибуты основного приложения в различных представлениях. IONDV. Viewlib используется исключительно как дополнение к основному приложению, реализованном на IONDV. Framework.

Для применения функциональных возможностей приложения необходимо указать наименование шаблона IONDV. Viewlib. Ссылка проставляется для атрибута на форме представления.

## Функциональные возможности

- [x] Отображение атрибута типа "Файл" на форме объекта системы в виде коллекции.
- [x] Представление атрибута типа "Файл" на форме как ресурса для совместного использования.
- [x] Отображение атрибута типа "Целое" в виде динамической шкалы числовых значений.
- [x] Представление атрибута типа "Коллекция" в виде комментария.

## Подключение IONDV. Viewlib

Для применения функционала приложения IONDV. Viewlib необходимо клонировать его в папку `applications`, рядом с основным приложением для объектов которого будет настраиваться функционал. Клонируем приложение в папку назначения командой:
```
git clone https://github.com/iondv/viewlib.git
```
Далее, в мете представления, для атрибута нужно указать наименование шаблона в свойстве `"options"`:
```
"options": {
    "template": "name"
}
```
### Описание функциональных возможностей приложения:

**Представление атрибута типа "Коллекция" в виде комментария**

Для обмена сообщениями между пользователями на форме объекта системы есть возможность подключить шаблон `"comments"`. Шаблон доступен только для атрибута с типом "Коллекция" на форме представления. Основой атрибута с представлением "Комментарий" будут атрибуты из класса, указанного в свойстве `"itemsClass"`. [Подробнее об атрибуте типа "Коллекция"](https://github.com/iondv/framework/blob/master/docs/ru/2_system_description/metadata_structure/meta_class/atr_itemclass_backcoll.md). 

Подключение шаблона `"comments"`:
```
"options": {
    "template": "comments",
    "comments": {
        "textProperty": "descript",
        "userProperty": "owner",
        "parentProperty": "answlink",
        "photoProperty": "owner_ref.foto.link",
        "dateProperty": "date"
    }
}
```
* `"descript"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит текст комментария пользователя.
* `"owner"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит данные о пользователе, создавшем комментарий.
* `"answlink"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит ответы на комментарий (обратная ссылка). Указаны в иерархическом порядке от комментария.
* `"owner_ref.foto.link"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит фото пользователя.
* `"date"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит дату отправки комментария.

**Представление атрибута типа "Файл" в виде коллекции**

При добавлении файлов на форму объекта системы - они отображаются в таблице, колонки которой являются атрибутами класса, указанного в свойстве `"itemsClass"` и предоставляют информацию о файле.

Подключение шаблона `"file-collection"`:
```
"options": {
    "template": "file-collection",
    "map": {
        "file": "file",
        "fileName": "name"
    },
    "maxSize": 20971520,
    "share": true
}
```
* `"file"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит ссылку на класс файлов.
* `"name"` - атрибут класса, указанного для свойства `"itemsClass"`, который содержит наименование добавленного файла.
* `"maxSize"` - максимальный размер добавляемых файлов (Мб). 
* `"share"` - логическое значение, отображающее возможность совместного использования файла.

**Представление атрибута типа "Целое" в виде динамической шкалы числовых значений**

Одним из способов задать числовое значение для атрибута на форме является применение шкалы числовых значений с бегунком. Для настройки представления атрибута типа "Целое" в виде такой шкалы необходимо применить шаблон `"slider"`.

Подключение шаблона `"slider"`:
```
"options": {
    "template": "slider",
    "slider": {
        "min": 0,
        "size": 250,
        "value": 0,
        "max": 100,
        "step": 5,
        "vertical": false,
        "popup": "Текущее значение: #value#",
        "skin": "material"
    }
}
```
* `"min"` - минимальное числовое значение на шкале.
* `"size"`: - размер шкалы, стандарное значение _250_.
* `"value"` - значение по умолчанию на шкале.
* `"max"` - максимальное числовое значение на шкале.
* `"step"` - шаг между числовыми значениями на шкале при передвижении бегунка.
* `"vertical"` - логическое значение, указывающее на вертикальное расположение шкалы.
* `"popup"` - текст, отображаемый при наведении на бегунок, где _#value#_ - текущее значение атрибута.
* `"skin"`: - тема, по умолчанию значение _"material"_.

**Представление атрибута типа "Изображение" с возможностью выделения зоны кадрирования и сохранения координат в указанный атрибут**

Подключение шаблона `"imageAreaSelect"`:
```
"options": {
    "template": "imageAreaSelect",
    "imageAreaSelect": {
        "aspectRatio": 0.75,
        "dataAttr": "stringAttrName"
    }
}
```
* `"aspectRatio"` - фиксированное соотношение сторон (ширина/высота). Если null, то соотношение произвольное. 
* `"dataAttr"` - название строкового атрибута, в который будут сохраняться координаты выделенной зоны.

--------------------------------------------------------------------------  

 #### [Licence](/LICENSE) &ensp;  [Contact us](https://iondv.com) &ensp;  [English](/README.md)   &ensp; [FAQs](/faqs.md)          

<div><img src="https://mc.iondv.com/watch/local/docs/app/viewlib" style="position:absolute; left:-9999px;" height=1 width=1 alt="iondv metrics"></div>

--------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.  
All rights reserved. 